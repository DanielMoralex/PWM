<!doctype html>
<html class="no-js" lang="es">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Registro</title>  <link rel="icon" href="/deepseek-ai-icon-seeklogo.ico" sizes="any">
  <link rel="apple-touch-icon" href="deepseek-ai-icon-seeklogo.png">

  <link rel="manifest" href="site.webmanifest">
  <link rel="stylesheet" href="/headerstyle.css">
  <link rel="stylesheet" href="/imagestyle.css">
  <link rel="stylesheet" href="/footerstyle.css">
  <link rel="stylesheet" href="logo.css">
  <link rel="stylesheet" href="register.css">
  <link rel="stylesheet" href="/headerstyle.css">
</head>

<body>

<header>
  <div xlu-include-file="header.html"></div> <!-- Aquí se cargará header.html -->
</header>

<main class="profile-container">
  <form class="registration-form" action="" method="POST">
    <h2>Registro</h2>
    <label for="name">Nombre y Apellidos:</label>
    <input type="text" id="name" name="name" required>

    <label for="email">Correo Electrónico:</label>
    <input type="email" id="email" name="email" required>

    <label for="nif">NIF/NIE (sin letra):</label>
    <input type="text" id="nif" name="nif" required>

    <label for="password">Contraseña:</label>
    <input type="password" id="password" name="password" required>

    <label for="phone">Teléfono de Contacto (sin espacios):</label>
    <input type="tel" id="phone" name="phone" required>

    <label for="role">Rol:</label>
    <select id="role" name="role" required>
      <option value="profesor">Profesor</option>
      <option value="alumno">Alumno</option>
    </select>

    <button type="submit">Registrarse</button>
  </form>

  <footer>
    <div xlu-include-file="footer.html"></div> <!-- Aquí se cargará header.html -->
  </footer>

  <script src="includefile.js"></script> <!-- Cargar el script externo -->
  <script>
    xLuIncludeFile(); // Ejecutar la función después de cargar el script
  </script>

  <script>
    document.querySelector(".registration-form").addEventListener("submit", function(event) {
      event.preventDefault();

      const nifInput = document.getElementById("nif").value.trim();
      const phoneInput = document.getElementById("phone").value.trim();

      const nifPattern = /^\d{7,8}$/; // Solo 7 u 8 dígitos sin letras
      const phonePattern = /^\d{9,15}$/; // Solo números (mínimo 9, máximo 15)

      if (!nifPattern.test(nifInput)) {
        alert("❌ El NIF/NIE debe contener solo números (7 u 8 dígitos) y sin letras.");
        return; // Detiene el proceso
      }

      if (!phonePattern.test(phoneInput)) {
        alert("❌ El teléfono debe contener solo números (mínimo 9) y sin espacios.");
        return; // Detiene el proceso
      }

      // Si los datos son correctos, se guardan en localStorage
      const formData = new FormData(event.target);
      const jsonData = Object.fromEntries(formData);

      localStorage.setItem("perfil", JSON.stringify(jsonData));

      alert("✅ Registro guardado en el navegador.");
    });
  </script>


</main>

</body>

</html>
